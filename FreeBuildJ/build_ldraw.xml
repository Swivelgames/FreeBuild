<project name="ldraw_parser" default="generate" basedir=".">
    <property name="src" location="." />
    <property name="gen" location="." />
    <property name="src" location="." />
    <property name="package" value="net/cemetech/sfgp/ldraw" />
 
    <path id="classpath">
        <pathelement location="shared-libs/antlr4-complete.jar" />
        <pathelement location="bin" />
    </path>
 
    <target name="parser" depends="lexer">
        <mkdir dir="${gen}/${package}" />
        <java classname="org.antlr.v4.Tool" classpathref="classpath" fork="true">
            <arg value="-o" />
            <arg path="${gen}/${package}" />
            <arg value="-lib" />
            <arg path="${src}/${package}" />
            <arg value="-listener" />
            <arg value="-package" />
            <arg value="net.cemetech.sfgp.ldraw" /> 
            <arg value="${src}/${package}/LDrawParser.g4" />
        </java>
    </target>

    <target name="lexer" depends="clean">
        <mkdir dir="${gen}/${package}" />
        <java classname="org.antlr.v4.Tool" classpathref="classpath" fork="true">
            <arg value="-o" />
            <arg path="${gen}/${package}" />
            <arg value="-lib" />
            <arg path="${src}/${package}" />
            <arg value="-listener" />
            <arg value="-package" />
            <arg value="net.cemetech.sfgp.ldraw" />

            <arg value="${src}/${package}/LDrawLexer.g4" />
        </java>
    </target>
 
    <target name="showtree">
        <input message="Enter Script To Test:" addproperty="test.script" defaultvalue="test/test1.calc" />
        <java classname="org.antlr.v4.runtime.misc.TestRig" classpathref="classpath" fork="true">
            <arg value="${package}.LDrawParser" />
            <arg value="program" />
            <arg value="-gui" />
            <arg value="${test.script}" />
        </java>
    </target>
 
    <target name="clean">
    </target>
</project>
